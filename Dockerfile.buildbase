FROM quay.io/arcalot/arcaflow-plugin-baseimage-python-osbase:stream9
RUN dnf -y install gcc-c++ python3-devel openssl-devel rust-futures-devel cargo

# Setup rust dependencies
RUN cargo init \
 && cargo add stream

# Setup poetry
RUN python3.9 -m pip install poetry==1.4.2 \
 && python3.9 -m poetry config virtualenvs.create false


# Setup coverage
RUN python3.9 -m pip install coverage==7.2.7 \
 && mkdir /htmlcov
